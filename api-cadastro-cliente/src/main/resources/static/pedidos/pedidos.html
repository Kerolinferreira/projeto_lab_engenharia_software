<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cadastro de Pedidos</title>

  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="./pedidos.css" />
</head>
<body>
  <div class="page">
    <header class="header">
      <div>
        <h1>Pedidos</h1>
        <p>Cadastre e gerencie itens do pedido</p>
      </div>
      <div class="user">Usuário: <strong>Teste</strong></div>
    </header>

    <main>
      <form id="pedidoForm" novalidate>
        <!-- ============ DADOS DO PEDIDO ============ -->
        <details class="section" open>
          <summary>Dados do Pedido</summary>
          <div class="content">
            <div class="grid row">
              <div class="field numero">
                <label for="numero">Nº Pedido</label>
                <input id="numero" name="numero" placeholder="Automático" disabled>
              </div>
              <div class="field pedido">
                <label class="req" for="data_pedido">Data *</label>
                <input id="data_pedido" name="data_pedido" type="date" required>
              </div>
            </div>
          </div>
        </details>

        <!-- ============ CLIENTE ============ -->
        <details class="section" open>
          <summary>Cliente</summary>
          <div class="content">
            <div class="grid row">
              <div class="field">
                <label class="req" for="cliente_busca">Buscar cliente *</label>
                <div class="tools-row no-gap">
                  <input id="cliente_busca" placeholder="Digite nome, CNPJ, cidade..." autocomplete="off" required>
                  <button type="button" id="btnBuscarCliente" class="btn-add">Buscar</button>
                </div>
                <small class="muted">Depois integre com GET /clientes?query=...</small>
              </div>
              <div class="field cliente">
                <label for="cliente_id">ID</label>
                <input id="cliente_id" name="cliente_id" placeholder="—" disabled>
              </div>
            </div>

            <div class="grid">
              <div class="field"><label for="cliente_razao">Razão Social</label><input id="cliente_razao" disabled></div>
              <div class="field"><label for="cliente_fantasia">Fantasia</label><input id="cliente_fantasia" disabled></div>
              <div class="field"><label for="cliente_cnpj">CNPJ/CPF</label><input id="cliente_cnpj" disabled></div>
              <div class="field"><label for="cliente_cidade">Cidade</label><input id="cliente_cidade" disabled></div>
            </div>
          </div>
        </details>

        <p class="link-teladecadastro"><a href="../produtos/produto.html">Cadastre seu produto antes!!</a></p>

        <!-- ============ ITENS ============ -->
        <details class="section" open>
          <summary>Itens</summary>
          <div class="content">

            <!-- barra de ferramentas -->
            <div class="tools-row">
              <button id="clearItemsBtn" type="button" class="btn-del">Remover Tudo</button>
              <button id="addItemBtn"   type="button" class="btn-add">+ Adicionar item</button>
            </div>

            <!-- tabela de itens -->
            <div class="table-wrap" role="region" aria-label="Tabela de itens">
              <table class="table" id="itensTable">
                <thead>
                </thead>
                <tbody>
                  <!-- linhas adicionadas via JS futuramente -->
                </tbody>
              </table>
            </div>

            <!-- totais (com Qtd padrão ANTES de Frete) -->
            <div class="totais">
              <div class="field">
                <label for="qtd_padrao">Qtd padrão</label>
                <input id="qtd_padrao" type="number" min="1" value="1" class="input-qtd">
              </div>

              <div class="field">
                <label for="desconto">Desconto (R$)</label>
                <input id="desconto" name="desconto" type="number" step="0.01" min="0" value="0">
              </div>
              <div class="field">
                <label for="frete">Frete (R$)</label>
                <input id="frete" name="frete" type="number" step="0.01" min="0" value="0">
              </div>
              <div class="field totalzao">
                <label for="total">Total (R$)</label>
                <input id="total" name="total" type="text" value="0,00" disabled>
              </div>
            </div>

          </div>
        </details>

        <!-- ============ PAGAMENTO ============ -->
        <details class="section">
          <summary>Pagamento & Entrega</summary>
          <div class="content">
            <div class="grid row">
              <div class="field">
                <label for="forma_pagamento">Forma de pagamento</label>
                <select id="forma_pagamento">
                  <option value="" selected>—</option>
                  <option value="pix">PIX</option>
                  <option value="cartao">Cartão</option>
                </select>
              </div>
              <div class="field">
                <label for="condicao_pagamento">Condição</label>
                <select id="condicao_pagamento">
                  <option value="" selected>—</option>
                  <option value="avista">À vista</option>
                  <option value="parcela">Parcelado em 1x kkkkkk</option>
                </select>
              </div>
              <div class="field">
                <label for="previsao_entrega">Previsão de entrega</label>
                <input id="previsao_entrega" type="date">
              </div>
            </div>
            <div class="field">
              <label for="observacoes">Observações</label>
              <input id="observacoes" placeholder="Observações do pedido (opcional)">
            </div>
          </div>
        </details>

        <div class="actions">
          <button type="submit">SALVAR PEDIDO</button>
        </div>
      </form>
    </main>
  </div>

  <!-- ============ POPUP PRODUTOS ============ -->
  <dialog id="modalProdutos" class="modal-produtos" aria-labelledby="modalTitle">
    <div class="modal-head">
      <h2 id="modalTitle">Buscar Produto</h2>
      <button type="button" id="fecharModal" class="btn-ghost">✕</button>
    </div>
    <div class="modal-body">
      <label for="buscaProduto" class="sr-only">Pesquisar</label>
      <input id="buscaProduto" type="search" placeholder="Buscar por ID ou nome do produto...">

      <table class="table" style="margin-top:14px">
        <thead>
          <tr>
            <th style="width:80px">ID</th>
            <th>Nome</th>
            <th>Descrição</th>
            <th style="width:140px">Preço</th>
            <th style="width:120px"></th>
          </tr>
        </thead>
        <!--<tbody id="tabelaProdutos"> 
          resultados devem aparecer aqui -->
        </tbody>
      </table>
    </div>
    <div class="modal-foot">
      <button type="button" id="cancelarProduto" class="btn-ghost">Cancelar</button>
    </div>
  </dialog>
</body>
</html>
